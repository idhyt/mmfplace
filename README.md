## What

åŒä¸€ä¸ªç…§ç‰‡è¿›è¡Œå¤åˆ¶ï¼Œä¼ è¾“ï¼Œç§»åŠ¨ç­‰æ“ä½œåï¼Œå…¶æ–‡ä»¶å±æ€§æ—¶é—´ä¼šè¢«ä¿®æ”¹æˆ–ä¸¢å¤±ï¼Œå¯¼è‡´å¤§éƒ¨åˆ†å›¾ç‰‡å¤„ç†å·¥å…·ä¼šå°†æœ€æ–°çš„ä¿®æ”¹æ—¶é—´ä½œä¸ºç…§ç‰‡åˆ›å»ºæ—¥æœŸï¼Œæœ€ç»ˆçš„ç»“æœå°±æ˜¯å¤šå¹´å‰æ‹çš„ç…§ç‰‡è¢«æ”¾åœ¨äº†ä»Šå¹´çš„ç›®å½•ä¸­ã€‚

è¿™ä¸ªå·¥å…·å°†è·å–æ‰€æœ‰çš„æ–‡ä»¶æ—¶é—´ä¿¡æ¯ï¼Œå¹¶å–æœ€æ—©æ—¶é—´ä½œä¸ºç…§ç‰‡çš„åˆ›å»ºæ—¥æœŸï¼Œè¿›è¡Œåˆ†ç±»å¤„ç†ï¼ŒåŒæ—¶ç¡®ä¿å¯¹åŒä¸€æ–‡ä»¶çš„æ¯æ¬¡å¤„ç†ç»“æœéƒ½ä¿æŒä¸€è‡´ã€‚

æ—¥æœŸæ•°æ®æ¥è‡ªäº [æ–‡ä»¶å…ƒæ•°æ®](https://github.com/drewnoakes/metadata-extractor) å’Œ `æ–‡ä»¶å±æ€§` çœ‹åˆ°çš„æ—¶é—´ï¼Œå¹¶å–æœ€æ—©æ—¶é—´ä½œä¸ºæœ€ç»ˆç»“æœã€‚

æ•´ç†ä¹‹å‰çš„ç›®å½•:

```bash
â¯ tree tests
tests
â”œâ”€â”€ 10x12x16bit-CMYK.psd
â”œâ”€â”€ 16color-10x10.bmp
â”œâ”€â”€ 24bpp-10x10.bmp
â”œâ”€â”€ 256color-10x10.bmp
â”œâ”€â”€ 8x4x8bit-Grayscale.eps
â”œâ”€â”€ 8x4x8bit-Grayscale.psd
â”œâ”€â”€ adobeJpeg1.eps
â”œâ”€â”€ adobeJpeg1.jpg
â”œâ”€â”€ adobeJpeg1.jpg.app2
â”œâ”€â”€ crash01.jpg
â”œâ”€â”€ dotnet-256x256-alpha-palette.png
â”œâ”€â”€ gimp-8x12-greyscale-alpha-time-background.png
â”œâ”€â”€ iccDataInvalid1.jpg.app2
â”œâ”€â”€ invalid-iCCP-missing-adler32-checksum.png
â”œâ”€â”€ manuallyAddedThumbnail.jpg
â”œâ”€â”€ mspaint-10x10.gif
â”œâ”€â”€ mspaint-8x10.png
â”œâ”€â”€ nikonMakernoteType1.jpg
â”œâ”€â”€ nikonMakernoteType2b.jpg
...

```

æ•´ç†ä¹‹åçš„ç›®å½•:

```bash
â¯ tree tests_output
â”œâ”€â”€ 1996
â”‚Â Â  â”œâ”€â”€ 11
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ withuncompressedycbcrthumbnail3.jpg
â”‚Â Â  â”‚Â Â  â””â”€â”€ withuncompressedycbcrthumbnail.jpg
â”‚Â Â  â””â”€â”€ 12
â”‚Â Â      â””â”€â”€ withuncompressedycbcrthumbnail2.jpg
â”œâ”€â”€ 2000
â”‚Â Â  â”œâ”€â”€ 01
â”‚Â Â  â”‚Â Â  â””â”€â”€ withiptc.jpg
â”‚Â Â  â””â”€â”€ 10
â”‚Â Â      â””â”€â”€ withuncompressedrgbthumbnail.jpg
â”œâ”€â”€ 2001
â”‚Â Â  â”œâ”€â”€ 01
â”‚Â Â  â”‚Â Â  â””â”€â”€ withexif.jpg
â”‚Â Â  â””â”€â”€ 04
â”‚Â Â      â””â”€â”€ nikonmakernotetype1.jpg
â”œâ”€â”€ 2002
â”‚Â Â  â”œâ”€â”€ 05
â”‚Â Â  â”‚Â Â  â””â”€â”€ crash01.jpg
â”‚Â Â  â”œâ”€â”€ 06
â”‚Â Â  â”‚Â Â  â””â”€â”€ withiptcexifgps.jpg
â”‚Â Â  â”œâ”€â”€ 08
â”‚Â Â  â”‚Â Â  â””â”€â”€ nikonmakernotetype2b.jpg
â”‚Â Â  â””â”€â”€ 11
â”‚Â Â      â”œâ”€â”€ manuallyaddedthumbnail.jpg
â”‚Â Â      â”œâ”€â”€ simple.jpg
â”‚Â Â      â””â”€â”€ simple.png
â”œâ”€â”€ 2003
â”‚Â Â  â””â”€â”€ 11
â”‚Â Â      â””â”€â”€ adobejpeg1.jpg
â”œâ”€â”€ 2004
â”‚Â Â  â””â”€â”€ 04
â”‚Â Â      â””â”€â”€ windowsxpfields.jpg
â”œâ”€â”€ 2010
â”‚Â Â  â””â”€â”€ 06
â”‚Â Â      â””â”€â”€ withpanasonicfaces.jpg
â”œâ”€â”€ 2012
â”‚Â Â  â”œâ”€â”€ 05
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 10x12x16bit-cmyk.psd
â”‚Â Â  â”‚Â Â  â””â”€â”€ 8x4x8bit-grayscale.psd
â”‚Â Â  â””â”€â”€ 12
â”‚Â Â      â””â”€â”€ photoshop-8x12-rgb24-all-metadata.png
â”œâ”€â”€ 2013
â”‚Â Â  â””â”€â”€ 01
â”‚Â Â      â””â”€â”€ gimp-8x12-greyscale-alpha-time-background.png
...
```

é»˜è®¤æƒ…å†µä¸‹æ–‡ä»¶ä¼šå¤åˆ¶åˆ° `%Y/%m/xxx` å¹¶ä¼šä¿ç•™åŸå§‹æ–‡ä»¶åï¼Œ å¦‚ `simple.jpg` -> `2002/11/simple.jpg`

å¯ä»¥é€šè¿‡å‚æ•° `--rename-with-ymd` å°†æ–‡ä»¶é‡å‘½åï¼Œå¦‚ `simple.jpg` -> `2002/11/2025-11-16.jpg`

```bash
â¯ tree tests_output
â”œâ”€â”€ 1996
â”‚Â Â  â”œâ”€â”€ 11
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ 1996-11-04.jpg
â”‚Â Â  â”‚Â Â  â””â”€â”€ 1996-11-10.jpg
â”‚Â Â  â””â”€â”€ 12
â”‚Â Â      â””â”€â”€ 1996-12-20.jpg
â”œâ”€â”€ 2000
â”‚Â Â  â”œâ”€â”€ 01
â”‚Â Â  â”‚Â Â  â””â”€â”€ 2000-01-01.jpg
â”‚Â Â  â””â”€â”€ 10
â”‚Â Â      â””â”€â”€ 2000-10-26.jpg
â”œâ”€â”€ 2001
â”‚Â Â  â”œâ”€â”€ 01
â”‚Â Â  â”‚Â Â  â””â”€â”€ 2001-01-28.jpg
â”‚Â Â  â””â”€â”€ 04
â”‚Â Â      â””â”€â”€ 2001-04-06.jpg
â”œâ”€â”€ 2002
â”‚Â Â  â”œâ”€â”€ 05
â”‚Â Â  â”‚Â Â  â””â”€â”€ 2002-05-08.jpg
â”‚Â Â  â”œâ”€â”€ 06
â”‚Â Â  â”‚Â Â  â””â”€â”€ 2002-06-20.jpg
â”‚Â Â  â”œâ”€â”€ 08
â”‚Â Â  â”‚Â Â  â””â”€â”€ 2002-08-29.jpg
â”‚Â Â  â””â”€â”€ 11
â”‚Â Â      â”œâ”€â”€ 2002-11-16.jpg
â”‚Â Â      â”œâ”€â”€ 2002-11-16_01.jpg
â”‚Â Â      â””â”€â”€ 2002-11-27.jpg
â”œâ”€â”€ 2003
â”‚Â Â  â””â”€â”€ 11
â”‚Â Â      â””â”€â”€ 2003-11-17.jpg
â”œâ”€â”€ 2004
...
```

## Build

å¯ä»¥ä»[releases](https://github.com/idhyt/mmfplace/releases)ä¸­ä¸‹è½½å·²ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶ï¼Œæˆ–è€…æœ¬åœ°æ„å»ºï¼š

```bash
â•°â”€ make build
1) x86_64-unknown-linux-musl
2) aarch64-unknown-linux-musl
3) x86_64-apple-darwin
4) aarch64-apple-darwin
5) x86_64-pc-windows-gnu
é€‰æ‹©ç›®æ ‡å¹³å°çš„ç¼–å·:
```

ç¼–è¯‘åçš„æ–‡ä»¶å­˜æ”¾åœ¨ `dist` æ–‡ä»¶å¤¹

```bash
â•°â”€ tree dist
dist
â”œâ”€â”€ mmfplace.aarch64-apple-darwin.tar.gz
â”œâ”€â”€ mmfplace.aarch64-unknown-linux-musl.tar.gz
â”œâ”€â”€ mmfplace.x86_64-apple-darwin.tar.gz
â”œâ”€â”€ mmfplace.x86_64-pc-windows-gnu.tar.gz
â””â”€â”€ mmfplace.x86_64-unknown-linux-musl.tar.gz
```

## Usage

å¦‚æœåœ¨ä¸»æœºè¿è¡Œï¼Œä½¿ç”¨å‰è¯·ç¡®ä¿ç³»ç»Ÿä¸­å·²ç»å®‰è£… java è¿è¡Œç¯å¢ƒï¼Œå½“å‰æµ‹è¯•åŸºäº `java-11` ç¯å¢ƒï¼Œå…¶ä»–ç‰ˆæœ¬è¯·è‡ªè¡ŒéªŒè¯ã€‚

ç¨‹åºæ‰§è¡Œåä¼šåœ¨åŒçº§ç›®å½•ä¸‹é‡Šæ”¾å¿…è¦çš„ä¾èµ–æ–‡ä»¶

```bash
â”œâ”€â”€ config.toml                 # é…ç½®æ–‡ä»¶
â”œâ”€â”€ mmfplace.exe                # ä¸»ç¨‹åº
â”œâ”€â”€ place.db                    # åŒæ­¥æ•°æ®åº“ï¼Œè¯·å‹¿åˆ é™¤ï¼Œå¦åˆ™æ— æ³•å®ç°å¢é‡åŒæ­¥
â””â”€â”€ tools                       # ä¾èµ–å·¥å…·åŒ…
    â”œâ”€â”€ metadata-extractor-2.19.0.jar
    â””â”€â”€ xmpcore-6.1.11.jar
````


~~## é”™è¯¯å¤„ç†~~

å¸¸è§çš„é”™è¯¯åŸºæœ¬éƒ½æ˜¯å°è¯•è§£ææ—¶é—´å­—ç¬¦ä¸²è¿‡ç¨‹ä¸­å‡ºé”™ï¼Œå¦‚:

```
ğŸ’¥ Unrecognized time string format: 2002:11:16 15:27:01, must add parsing format `striptimes` in config.toml`
```

é…ç½®æ–‡ä»¶`config.toml`ï¼Œåœ¨ `dateparse.list` éƒ¨åˆ†åŠ å…¥å¦‚ä¸‹å†…å®¹:

```toml
    { "fmt" = "%Y:%m:%d %H:%M:%S", "test" = "2002:11:16 15:27:01" },
```
